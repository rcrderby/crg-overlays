<!-- Custom Penalty Display Overlay -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Strict//EN">
<html>
<head>
  <title>Penalties Overlay</title>
  <meta charset="UTF-8">

  <!-- Required CRG Javascript files -->
  <script type="text/javascript" src="/external/jquery/jquery.js"></script>
  <script type="text/javascript" src="/external/jquery-ui/jquery-ui.js"></script>

  <!-- Configuration file - load before core.js -->
  <script type="text/javascript" src="config.js"></script>

  <!-- This automatically loads index.js and index.css -->
  <script type="text/javascript" src="/json/core.js"></script>
</head>

<body sbContext="ScoreBoard.CurrentGame">

  <!-- Loading Overlay -->
  <div id="loading-overlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <div class="loading-text"></div>
    </div>
  </div>

  <div id="overlay">

    <!-- Teams and Logos Section -->
    <div id="teams-container">
      
      <!-- Team 1 (Home) Container -->
      <div class="team-container" id="team1-container">
        <div class="team-logo-container">
          <img class="team-logo"
               id="team1-logo"
               sbAttr="src: Logo"
               sbClass="visible: Logo: hasValue"
               sbContext="Team(1)">
        </div>
      </div>

      <!-- Penalties Title -->
      <div id="penalties-title">
        <h1></h1>
      </div>

      <!-- Team 2 (Away) Container -->
      <div class="team-container" id="team2-container">
        <div class="team-logo-container">
          <img class="team-logo"
               id="team2-logo"
               sbAttr="src: Logo"
               sbClass="visible: Logo: hasValue"
               sbContext="Team(2)">
        </div>
      </div>
    </div>

    <!-- Rosters and Penalties Container -->
    <div id="rosters-penalties-container">

      <!-- Team 1 (Home) Rosters and Penalties -->
      <div id="team1-rosters-penalties" sbContext="Team(1)">
        <div class="roster-penalties-container">
          <div class="roster-penalty-row">

            <!-- Team 1 Roster Column -->
            <div id="team1-roster"
                 class="roster"
                 sbcss="background-color: Color(whiteboard.bg) |
                        border-color: Color(whiteboard.fg) |
                        color: Color(whiteboard.fg) |
                        text-shadow: Color(whiteboard.glow): glowColorToShadow">

              <!-- Roster lines for each player -->
              <div class="roster-line"
                   sbAttr="roster-number: RosterNumber | name-text: Name"
                   sbClass="sbHide: Flags: shouldHideSkater"
                   sbForeach="Skater:: roster-number: resort=RosterNumber">
                <div class="roster-number" sbDisplay="RosterNumber"></div>
                <div class="roster-name">
                  <span class="name-text" sbDisplay="Name"></span>
                  <span class="captain-indicator" sbDisplay="Flags: showCaptainIndicator"></span>
                </div>
              </div>
            </div>
            
            <!-- Team 1 Penalties Column -->
            <div class="penalties-column">
              <div id="team1-penalties">
                <div class="penalty-line"
                     sbAttr="roster-number: RosterNumber"
                     sbClass="sbHide: Flags: shouldHideSkater"
                     sbForeach="Skater:: roster-number: resort=RosterNumber">

                  <!-- Penalty codes display -->
                  <div class="penalty-codes">
                    <span sbAttr="penalty-number: Number"
                          sbDisplay="Code"
                          sbClass="sbHide: Code, Number: shouldHidePenaltyCode"
                          sbForeach="Penalty">
                    </span>
                  </div>

                  <!-- Penalty count with status detection (Penalty(0).Code registers WebSocket channel) -->
                  <div class="penalty-count"
                       sbClass="penalty-count-5: PenaltyCount, Penalty(0).Code: isPenaltyCount5 | 
                                penalty-count-6: PenaltyCount, Penalty(0).Code: isPenaltyCount6 | 
                                penalty-count-exp-fo-re: PenaltyCount, Penalty(0).Code: isPenaltyCountExpFoRe"
                       sbDisplay="PenaltyCount, Penalty(0).Code: getPenaltyCountDisplay">
                  </div>
                </div>
              </div>

              <!-- Team 1 penalty total -->
              <div id="team1-total" class="penalty-total">
                <span class="total-label">Total:</span>
                <span class="total-count" sbDisplay="TotalPenalties"></span>
              </div>
            </div>

          </div>
        </div>
      </div>

      <!-- Team 2 (Away) Rosters and Penalties -->
      <div id="team2-rosters-penalties" sbContext="Team(2)">
        <div class="roster-penalties-container">
          <div class="roster-penalty-row">

            <!-- Team 2 Roster Column -->
            <div id="team2-roster"
                 class="roster"
                 sbcss="background-color: Color(whiteboard.bg) |
                        border-color: Color(whiteboard.fg) |
                        color: Color(whiteboard.fg) |
                        text-shadow: Color(whiteboard.glow): glowColorToShadow">

              <!-- Roster lines for each player -->
              <div class="roster-line"
                   sbAttr="roster-number: RosterNumber | name-text: Name"
                   sbClass="sbHide: Flags: shouldHideSkater"
                   sbForeach="Skater:: roster-number: resort=RosterNumber">
                <div class="roster-number" sbDisplay="RosterNumber"></div>
                <div class="roster-name">
                  <span class="name-text" sbDisplay="Name"></span>
                  <span class="captain-indicator" sbDisplay="Flags: showCaptainIndicator"></span>
                </div>
              </div>
            </div>

            <!-- Team 2 Penalties Column -->
            <div class="penalties-column">
              <div id="team2-penalties">
                <div class="penalty-line"
                     sbAttr="roster-number: RosterNumber"
                     sbClass="sbHide: Flags: shouldHideSkater"
                     sbForeach="Skater:: roster-number: resort=RosterNumber">
                  
                  <!-- Penalty codes display -->
                  <div class="penalty-codes">
                    <span sbAttr="penalty-number: Number"
                          sbDisplay="Code"
                          sbClass="sbHide: Code, Number: shouldHidePenaltyCode"
                          sbForeach="Penalty">
                    </span>
                  </div>

                  <!-- Penalty count with status detection (Penalty(0).Code registers WebSocket channel) -->
                  <div class="penalty-count"
                       sbClass="penalty-count-5: PenaltyCount, Penalty(0).Code: isPenaltyCount5 | 
                                penalty-count-6: PenaltyCount, Penalty(0).Code: isPenaltyCount6 | 
                                penalty-count-exp-fo-re: PenaltyCount, Penalty(0).Code: isPenaltyCountExpFoRe"
                       sbDisplay="PenaltyCount, Penalty(0).Code: getPenaltyCountDisplay">
                  </div>
                </div>
              </div>

              <!-- Team 2 penalty total -->
              <div id="team2-total" class="penalty-total">
                <span class="total-label">Total:</span>
                <span class="total-count" sbDisplay="TotalPenalties"></span>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <!-- Game Information Section -->
    <div id="game-info">
      <div class="game-info-wrapper">

        <!-- Tournament Information -->
        <div id="tournament-info"
             sbAttr="data-gameno: EventInfo(GameNo)">
          <span sbDisplay="EventInfo(Tournament)"></span>
          <span sbDisplay="EventInfo(GameNo): prependGameNo"></span>
        </div>

        <div id="game-details">
          
          <!-- Custom logo space -->
          <div id="custom-logo-space">
            <img id="custom-logo" class="custom-logo" src="" />
          </div>

          <div id="teams-scores">

            <!-- Team 1 (Home) -->
            <div class="team-score-block" sbContext="Team(1)">
              <div class="team-name" 
                  sbDisplay="AlternateName(whiteboard), Name: getTeamNameWithDefault"></div>
              <div class="score" sbDisplay="Score"></div>
            </div>

            <!-- vs. and Clock Container -->
            <div id="vs-clock-container">
              <div class="vs-text">vs.</div>
              <div id="clock-container">

                <!-- Period Clock -->
                <div id="period-clock" 
                     sbClass="sbHide: Clock(Intermission).Running,
                                      OfficialScore,
                                      InOvertime,
                                      CurrentPeriodNumber: shouldHidePeriodClock"
                     sbDisplay="Clock(Period).Time: sbToLongTime">
                </div>

                <!-- Intermission Clock -->
                <div id="intermission-clock"
                     sbClass="sbHide: Clock(Intermission).Running,
                                      OfficialScore,
                                      InOvertime,
                                      CurrentPeriodNumber: shouldHideIntermissionClock"
                     sbDisplay="Clock(Intermission).Time: sbToLongTime">
                </div>
              </div>

              <!-- Clock Labels for each game state -->
              
              <!-- Period Clock Label -->
              <div class="clock-label"
                   sbClass="sbHide: Clock(Intermission).Running,
                                    OfficialScore,
                                    InOvertime,
                                    CurrentPeriodNumber: shouldHidePeriodClock"
                   sbDisplay="CurrentPeriodNumber: getPeriodLabel">
              </div>

              <!-- Intermission Label -->
              <div class="clock-label"
                   sbPrefix="#: ScoreBoard.Settings.Setting(ScoreBoard.Intermission : )"
                   sbClass="sbHide: Clock(Intermission).Running,
                                    OfficialScore,
                                    InOvertime,
                                    CurrentPeriodNumber: shouldHideIntermissionClock"
                   sbDisplay="CurrentPeriodNumber, #.*: getIntermissionLabel">
              </div>

              <!-- Unofficial Score Label -->
              <div class="clock-label"
                   sbPrefix="#: ScoreBoard.Settings.Setting(ScoreBoard.Intermission : )"
                   sbClass="sbHide: CurrentPeriodNumber,
                                    Clock(Intermission).Running,
                                    OfficialScore,
                                    InOvertime: shouldHideUnofficialScore"
                   sbDisplay="#.Unofficial">
              </div>

              <!-- Official Score Label -->
              <div class="clock-label"
                   sbPrefix="#: ScoreBoard.Settings.Setting(ScoreBoard.Intermission : )"
                   sbClass="sbHide: OfficialScore: invertBoolean"
                   sbDisplay="#.Official">
              </div>

              <!-- Overtime Label -->
              <div class="clock-label"
                   sbClass="sbHide: InOvertime: invertBoolean">
                   Overtime
              </div>

              <!-- Coming Up Label -->
              <div class="clock-label"
                   sbClass="sbHide: CurrentPeriodNumber,
                                    Clock(Intermission).Running,
                                    OfficialScore,
                                    InOvertime: shouldHideComingUp">
                   Coming Up
              </div>
            </div>

            <!-- Team 2 (Away) -->
            <div class="team-score-block" sbContext="Team(2)">
              <div class="team-name" 
                  sbDisplay="AlternateName(whiteboard), Name: getTeamNameWithDefault"></div>
              <div class="score" sbDisplay="Score"></div>
            </div>

          </div>

        </div>
      </div>

      <!-- Timeout Banner -->
      <div class="timeout-banner"
          sbClass="visible: Clock(Timeout).Running: isTimeoutVisible | 
                   position-center: TimeoutOwner: isPositionCenter |
                   position-team1: TimeoutOwner: isPositionTeam1 |
                   position-team2: TimeoutOwner: isPositionTeam2"
          sbDisplay="TimeoutOwner, OfficialReview: getTimeoutText">
      </div>
    </div>

  </div>

  <!-- Amph Container -->
  <div id="amph-container">
    <img id="amph-image" src="" alt="">
  </div>

</body>
</html>